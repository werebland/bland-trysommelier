{"version":3,"file":"static/webpack/static/development/pages/get-access.js.6312ee0b5c63576738d5.hot-update.js","sources":["webpack:///./pages/get-access.js"],"sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Head from 'next/head'\nimport axios from 'axios'\n\nimport AccessForm from '../components/AccessForm'\nimport Navbar from '../components/Navbar'\n\nconst PageWrapper = styled.div`\n  padding: 156px 24px 24px;\n  box-sizing: border-box;\n  border: 10px solid #1f1f1f;\n  min-height: 100vh;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n\n  @media only screen and (min-width: 960px) {\n    padding: 156px 16px 16px;\n  }\n`;\n\nconst PageTitle = styled.h1`\n  font-size: 2rem;\n  font-weight: 700;\n  font-family: 'Montserrat', sans-serif;\n  color: #1f1f1f;\n  position: relative;\n  margin: 0 auto 16px;\n  display: inline-flex;\n\n  &:after {\n    content: \"\";\n    width: 100%;\n    height: 8px;\n    background: #f94343;\n    display: block;\n    position: absolute;\n    bottom: 0px;\n    left: 4px;\n    z-index: -1;\n  }\n`;\n\nclass GetAccess extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accessStatus: null,\n      email: \"\",\n      name: \"\",\n    };\n  }\n\n  handleAccess(e) {\n    e.preventDefault();\n    const { email, name } = this.state\n    const names = _.split(name, ' ', 2)\n    const firstName = names[0]\n    const lastName = names[1]\n\n    const data = {\n      email,\n      firstName,\n      lastName\n    }\n\n    const formattedData = JSON.stringify(data)\n    console.log(formattedData);\n\n    axios({\n      method: 'post',\n      url: 'https://wt-2c136a182f9df0f639eceee9aa700a3d-0.sandbox.auth0-extend.com/somm-mailchimp',\n      data: formattedData,\n      headers: {\n        'Access-Control-Allow-Credentials': true,\n        'Access-Control-Allow-Origin': 'http://localhost:3000',\n        'Access-Control-Expose-Headers': 'x-auth0-proxy-stats, x-auth0-stats, x-wt-response-source, location',\n        'Content-Type': 'application/json'\n      }\n    }).then((response) => {\n      console.log(response);\n      this.setState({\n        accessStatus: 'success'\n      })\n    })\n    .catch((error) => {\n      console.log(error.response.data);\n      this.setState({\n        accessStatus: error.response.data.details.title\n      })\n    });\n  }\n\n  render() {\n    return (\n      <PageWrapper>\n        <Head>\n          <title>Get access | Somm | Your menu's personal assistant</title>\n        </Head>\n        <Navbar />\n        <PageTitle>\n          Get access\n        </PageTitle>\n        <AccessForm\n          handleAccess={(e) => this.handleAccess(e)}\n          email={this.state.email}\n          handleEmail={(email) => this.setState({ email })}\n          name={this.state.name}\n          handleName={(name) => this.setState({ name })}\n          accessStatus={this.state.accessStatus}\n          handleClear={() => this.setState({ accessStatus: \"\", name: \"\", email: \"\" })}/>\n      </PageWrapper>\n    );\n  }\n\n}\n\nexport default GetAccess;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AACA;AAqBA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AACA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAJA;AAWA;AACA;AAAA;AACA;AADA;AAGA;AAEA;AACA;AAAA;AACA;AADA;AAGA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;;;;AAtEA;AACA;AAyEA;;;;A","sourceRoot":""}